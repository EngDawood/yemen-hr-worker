name = "yemen-hr-worker"
main = "src/index.ts"
compatibility_date = "2025-01-01"

[observability]
enabled = true

[observability.logs]
enabled = true
invocation_logs = true

[triggers]
crons = ["0 * * * *"]  # Every hour

[[kv_namespaces]]
binding = "POSTED_JOBS"
id = "d56f24496a1a48d7bf2cb6a325533d5c"

[[d1_databases]]
binding = "JOBS_DB"
database_name = "yemen-jobs"
database_id = "7e1e3ed7-1a37-4e81-a198-08a6080fff8a"

[ai]
binding = "AI"

[version_metadata]
binding = "CF_VERSION_METADATA"

[vars]
RSS_FEED_URL = "https://rssbridge.prenghy.org/?action=display&bridge=CssSelectorFeedExpanderBridge&feed=https://rssbridge.prenghy.org/?action%3Ddisplay%26bridge%3DXPathBridge%26url%3Dhttps%253A%252F%252Fyemenhr.com%252Fjobs%26item%3D%252Fhtml%252Fbody%252Fdiv%252Fmain%252Fdiv%252Fdiv%252Fdiv%252Fdiv%252Fdiv%252Fdiv%252Ftable%252Ftbody%252Ftr%26title%3Dtd%255B3%255D%252Fdiv%255B1%255D%252Fa%255B1%255D%252Fchild%253A%253Anode%2528%2529%26content%3Dtd%255B4%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fspan%255B1%255D%252Fa%255B1%255D%252Fchild%253A%253Anode%2528%2529%26raw_content%3Don%26uri%3Dtd%255B3%255D%252Fdiv%255B1%255D%252Fa%255B1%255D%252Fancestor-or-self%253A%253Anode%2528%2529%252F%2540href%26author%3Dtd%255B2%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fa%255B1%255D%252Fchild%253A%253Anode%2528%2529%26timestamp%3Dtd%255B5%255D%252Fspan%255B1%255D%252F%252Ftext%2528%2529%26enclosures%3Dtd%255B2%255D%252Fdiv%255B1%255D%252Fimg%255B1%255D%252F%2540src%26categories%3D%26format%3DAtom&content_selector=body+%3E+div.bg-gray-100+%3E+main+%3E+div+%3E+div:nth-child(5)&content_cleanup=div.bg-white.rounded-xl.shadow-lg.mb-8.no-print,div.countdown-timer,svg,a%5Bhref*=%22login%22%5D&dont_expand_metadata=on&discard_thumbnail=off&thumbnail_as_header=on&limit=5&format=Atom"
# Production channel
TELEGRAM_CHAT_ID = "-1001252486813"  # https://t.me/hr_yemen
# Configuration variables
ADMIN_CHAT_ID = "801062947"  # Personal Telegram ID for alerts
MAX_JOBS_PER_RUN = "25"
DELAY_BETWEEN_POSTS_MS = "1000"
LINKEDIN_URL = "https://www.linkedin.com/in/dawood3"
ENVIRONMENT = "production"
# AI Configuration
AI_MODEL = "@cf/qwen/qwen3-30b-a3b-fp8"  # Workers AI model for translation/summarization

# Secrets (set via wrangler secret put):
# - TELEGRAM_BOT_TOKEN

# ========== Preview Environment ==========
[env.preview]
name = "yemen-hr-worker-preview"

[[env.preview.kv_namespaces]]
binding = "POSTED_JOBS"
id = "6f106aa745654020a7ac382ff5a8cc32"  # Separate KV for preview

[[env.preview.d1_databases]]
binding = "JOBS_DB"
database_name = "yemen-jobs"
database_id = "7e1e3ed7-1a37-4e81-a198-08a6080fff8a"

[env.preview.ai]
binding = "AI"

[env.preview.version_metadata]
binding = "CF_VERSION_METADATA"

[env.preview.triggers]
crons = ["0 * * * *"]  # Every hour

[env.preview.vars]
RSS_FEED_URL = "https://rssbridge.prenghy.org/?action=display&bridge=CssSelectorFeedExpanderBridge&feed=https://rssbridge.prenghy.org/?action%3Ddisplay%26bridge%3DXPathBridge%26url%3Dhttps%253A%252F%252Fyemenhr.com%252Fjobs%26item%3D%252Fhtml%252Fbody%252Fdiv%252Fmain%252Fdiv%252Fdiv%252Fdiv%252Fdiv%252Fdiv%252Fdiv%252Ftable%252Ftbody%252Ftr%26title%3Dtd%255B3%255D%252Fdiv%255B1%255D%252Fa%255B1%255D%252Fchild%253A%253Anode%2528%2529%26content%3Dtd%255B4%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fspan%255B1%255D%252Fa%255B1%255D%252Fchild%253A%253Anode%2528%2529%26raw_content%3Don%26uri%3Dtd%255B3%255D%252Fdiv%255B1%255D%252Fa%255B1%255D%252Fancestor-or-self%253A%253Anode%2528%2529%252F%2540href%26author%3Dtd%255B2%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fdiv%255B1%255D%252Fa%255B1%255D%252Fchild%253A%253Anode%2528%2529%26timestamp%3Dtd%255B5%255D%252Fspan%255B1%255D%252F%252Ftext%2528%2529%26enclosures%3Dtd%255B2%255D%252Fdiv%255B1%255D%252Fimg%255B1%255D%252F%2540src%26categories%3D%26format%3DAtom&content_selector=body+%3E+div.bg-gray-100+%3E+main+%3E+div+%3E+div:nth-child(5)&content_cleanup=div.bg-white.rounded-xl.shadow-lg.mb-8.no-print,div.countdown-timer,svg,a%5Bhref*=%22login%22%5D&dont_expand_metadata=on&discard_thumbnail=off&thumbnail_as_header=on&limit=10&format=Atom"
TELEGRAM_CHAT_ID = "-1003799523484"  # https://t.me/yemenjobss (preview)
# Configuration variables (same as production)
ADMIN_CHAT_ID = "801062947"  # Personal Telegram ID for alerts
MAX_JOBS_PER_RUN = "25"
DELAY_BETWEEN_POSTS_MS = "1000"
LINKEDIN_URL = "https://www.linkedin.com/in/dawood3"
ENVIRONMENT = "preview"
# AI Configuration
AI_MODEL = "@cf/openai/gpt-oss-120b"  # Testing GPT-OSS-120B for better translation quality

# Secret for preview: TELEGRAM_BOT_TOKEN (use preview bot token)
